[{"/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/components/Search.js":"1","/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/index.js":"2","/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/components/Accordion.js":"3","/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/App.js":"4"},{"size":2704,"mtime":1609740382967,"results":"5","hashOfConfig":"6"},{"size":151,"mtime":1607549999625,"results":"7","hashOfConfig":"6"},{"size":1349,"mtime":1607985248477,"results":"8","hashOfConfig":"6"},{"size":594,"mtime":1608047219649,"results":"9","hashOfConfig":"6"},{"filePath":"10","messages":"11","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"12"},"uzlhjn",{"filePath":"13","messages":"14","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"15","messages":"16","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/components/Search.js",["19"],"import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Search = () => {\r\n  // Term se actualiza a medida que el usuario va escribiendo\r\n  const [term, setTerm] = useState('programming');\r\n  const [results, setResults] = useState([]);\r\n\r\n  console.log('API Results', results);\r\n\r\n  // Se ejecuta la primera vez que se renderiza el componente\r\n  // y cuando Term cambia\r\n  useEffect(() => {\r\n    // Se crea una función search, porque no es posible que la función principal de useEffect sea async-await\r\n    const search = async () => {\r\n      const { data } = await axios.get('https://en.wikipedia.org/w/api.php', {\r\n        params: {\r\n          action: 'query',\r\n          list: 'search',\r\n          origin: '*',\r\n          format: 'json',\r\n          srsearch: term,\r\n        },\r\n      });\r\n      setResults(data.query.search);\r\n    };\r\n    if (term && !results.length) {\r\n      // Si term es != '' && no se ha realizado una búsqueda antes\r\n      // Para que realice una búsqueda inmediata cuando se carga por primera vez la página\r\n      search();\r\n    } else {\r\n      // Para que realice la búsqueda 1s luego de que se termine de escribir\r\n      const timeoutId = setTimeout(() => {\r\n        if (term) {\r\n          // Si term es diferente de '',\r\n          // Se usa para que cuando se borre completamente la barra de busqueda no salga error\r\n          search();\r\n        }\r\n      }, 1000); // 1 segundo\r\n\r\n      return () => {\r\n        clearTimeout(timeoutId); // Elimina el setTimeout\r\n      };\r\n    }\r\n  }, [term]);\r\n\r\n  const renderedResults = results.map((result) => {\r\n    return (\r\n      <div className='item' key={result.pageid}>\r\n        <div className='right floated content'>\r\n          <a\r\n            className='ui button'\r\n            href={`https://en.wikipedia.org?curid=${result.pageid}`}\r\n          >\r\n            Go\r\n          </a>\r\n        </div>\r\n        <div className='content'>\r\n          <div className='header'>{result.title}</div>\r\n          {/* Se hace lo siguinete pues la API de Wikipedia, \r\n          devuelve los snippet con unos <span> embebidos */}\r\n          <span dangerouslySetInnerHTML={{ __html: result.snippet }}></span>\r\n          {/* {result.snippet} */}\r\n        </div>\r\n      </div>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <div className='ui form'>\r\n        <div className='field'>\r\n          <label>Enter search text</label>\r\n          <input\r\n            className='input'\r\n            value={term}\r\n            onChange={(e) => setTerm(e.target.value)}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className='ui celled list'>{renderedResults}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n","/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/index.js",[],"/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/components/Accordion.js",[],"/mnt/c/Users/susana.duque/Desktop/Academy/react-academy/course-modern-react-with-redux/widgets/src/App.js",[],{"ruleId":"20","severity":1,"message":"21","line":45,"column":6,"nodeType":"22","endLine":45,"endColumn":12,"suggestions":"23"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'results.length'. Either include it or remove the dependency array.","ArrayExpression",["24"],{"desc":"25","fix":"26"},"Update the dependencies array to be: [results.length, term]",{"range":"27","text":"28"},[1545,1551],"[results.length, term]"]